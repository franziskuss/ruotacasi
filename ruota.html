<!doctype html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ruota dei Casi Clinici</title>

    <style>
      html {
        height: 100%;
        width: 100%;
      }

      body {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #651D32; /* sfondo bordeaux */
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
        overflow: hidden;
      }

      .container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .title {
        font-size: 50px;
        font-weight: 600;
        color: #ffffff;
        margin-bottom: 20px;
        text-align: center;
        letter-spacing: -0.5px;
      }

      .subtitle {
        font-size: 16px;
        color: #f5f5f5;
        margin-bottom: 20px;
        text-align: center;
        opacity: 0.9;
      }

      .wheel-container {
        position: relative;
        width: 500px;
        height: 500px;
        margin-bottom: 30px;
      }

      .wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        position: relative;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25), 0 2px 8px rgba(0, 0, 0, 0.2);
        transition: transform 5s cubic-bezier(0.17, 0.67, 0.29, 1);
        overflow: hidden;
      }

      .segment path {
        stroke: #ffffff;
        stroke-width: 2;
      }

      .pointer {
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-top: 40px solid #ffffff;
        filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
        z-index: 5;
      }

      .center-circle {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90px;
        height: 90px;
        background: #ffffff;
        border-radius: 50%;
        border: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        z-index: 10;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden; /* per tenere il logo dentro il cerchio */
      }

      .center-logo {
        width: 75%;
        height: 75%;
        object-fit: contain;
        pointer-events: none;
      }

      .spin-button {
        background: #ffffff;
        color: #651D32;
        border: none;
        padding: 16px 40px;
        font-size: 18px;
        font-weight: 600;
        border-radius: 999px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .spin-button:hover:not(:disabled) {
        transform: scale(1.05);
      }

      .spin-button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .result {
        margin: 15px;
        max-width: 900px;
        max-height: 280px;
        padding: 16px 20px;
        font-size: 15px;
        line-height: 1.5;
        font-weight: 400;
        color: #ffffff;
        text-align: left;
        letter-spacing: -0.1px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        background: rgba(0, 0, 0, 0.15);
        overflow-y: auto;
        white-space: pre-line; /* rende visibili gli a capo del testo */
      }

      @media (max-width: 768px) {
        .wheel-container {
          width: 320px;
          height: 320px;
        }

        .title {
          font-size: 26px;
        }

        .spin-button {
          padding: 12px 28px;
          font-size: 16px;
        }

        .result {
          max-width: 95%;
          max-height: 240px;
          font-size: 14px;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1 class="title">Ruota dei Casi Clinici</h1>
      <div class="subtitle"></div>

      <div class="wheel-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel"></div>
        <div class="center-circle">
          <img src="assets/logo.png" alt="Logo" class="center-logo" />
        </div>
      </div>

      <button class="spin-button" id="spinButton">GIRA LA RUOTA</button>
      <div class="result" id="result">
        Fai girare la ruota per estrarre un caso clinico.
      </div>
    </div>

    <script>
      const wheel = document.getElementById("wheel");
      const spinButton = document.getElementById("spinButton");
      const result = document.getElementById("result");

      let isSpinning = false;
      let currentRotation = 0;
      let lastNumber = null;

      // Palette armonica, colori pastello che non stonano con lo sfondo #651D32
      const colors = [
        "#C97A8A", "#B58BB8", "#A7A9CE", "#8FC2D4", "#8AD1C3",
        "#A8D5A2", "#D8D28F", "#E7B98C", "#E29A8D", "#D98C9F",
        "#C97A8A", "#B58BB8", "#A7A9CE", "#8FC2D4", "#8AD1C3",
        "#A8D5A2", "#D8D28F", "#E7B98C", "#E29A8D", "#D98C9F"
      ];

      // Mappa casi clinici (1–20)
      const cases = {
        1: `Per una paziente di 52 anni ancora non in menopausa con valori normali di trigliceridi e colesterolo, accumulo di grasso in vita (non insulino resistente), e con valori di glicemia di 70 mg/dl (disse che mesi fa le uscì un valore di glicemia di circa 50... ho pensato si tratti di ipoglicemia reattiva...in ogni caso la paziente deve perdere più di 10 Kgr ma lamenta spesso fame e non fa attività fisica (prende antidepressivi da circa 4 anni), cosa mi consigliate come integrazione?`,

        2: `Paziente donna con forte gonfiore  addominale alto, obesa. Per via dei tempi stretti a lavoro, non riesce a correggere l'abitudine di masticare velocemente, ci prova ma fa orario continuato tutti i giorni e si trascina la stessa modalità anche a casa per la difficoltà ulteriore di essere organizzata. Come potrei aiutarla per agevolare la situazione?`,

        3: `Consiglio per una paziente che non riesce a dormire per più di 4 - 5 ore a notte. Riferisce di poter ricondurre queste poche ore di sonno ad uno stato di ansia e preoccupazione per vari motivi.
Il medico le ha fatto assumere per diverse settimane Sonirem con il risultato sì di farla dormire, ma con un risveglio al mattino piuttosto rallentato; ha infatti deciso di sospenderlo. In altre occasioni le ha prescritto il lexotan, ma con stesso esito.
Non presenta patologie né assume farmaci.
Vi chiedo quali prodotti poterle consigliare.
`,

        4: `Caso 1: donna anziana di 84 anni che assume i seguenti farmaci: congescor, ferro grad, pantorc 20 mg, triatec 2,5 mg, rivaroxaban 15 mg, soffre di inoltre di insuffienza venosa. Soffre di attacchi di panico, ansia, insonnia, cosa potrei consigliare a riguardo?


Caso 2: uomo di 37 anni con diverse patologie autoimmuni: vitiligine, tiroidite di hashimoto, psoriasi ungueale. Ha anche DISBIOSI intestinale e vitamina d bassa, oltre a consigliargli d nobile, vorrei associare dei probiotici, soprattutto da consigliare a cicli, in particolare durante i cambi di stagione in cui riferisce un peggioramento dei sintomi delle condizioni immunitarie, cosa mi potete consigliare?
`,

        5: `Paziente che lavora su turni e presenta immancabilmente una glicemia alterata e valori di colesterolo molto alti, anche trigliceridi (responsivi a trattamento con statine che però ha deciso di interrompere qualche mese fa, quando dopo la discesa dei valori ematici ad oggi sono ritornati quelli di partenza).
Che integrazione consigliamo?`,

        6: `Ragazzo di 22 anni, ha già eseguito tanti test per intolleranze e allergie alimentari, non appena magia iniziano a spuntare chiazze pruriginose violacee e vescicole. Cosa posso consigliare ? Sta seguendo ulteriori accertamenti.`,

        7: `Paziente di anni con attacchi di fame notturna.cosa posso consigliare?`,

        8: `Paziente uomo 53 anni, ha sofferto in passato di fibrillazione atriale, ultimo episodio risale a 5 anni fa. Ex sportivo, al momento obeso ma con una buona struttura muscolare, insulino resistente, fortemente motivato nel voler perdere peso. In cura con  Norvasc 5mg e Telmisartan 80mg. Cosa consigliare per perder peso e lavorare sull’insulino-resistenza?`,

        9: `Donna di 55 anni,asmatica, dieta alimentare discontinua,  leggermente in sovrappeso nell'ultima settimana presenta dopo i pasti gonfiore addominale, con reflusso e conseguente asma sta già utilizzando Digesvin.  Si può associare/sostituire con altro integratore per migliorare la situazione in corso ?`,

        10: `Vorrei un consiglio su quale dei probiotici consigliare ad un mio paziente che ha un intestino irritabile ma principalmente accumula tantissima aria all'interno dello stomaco oltre che nella parte bassa dell'intestino. Non ha alcun'altra patologia.`,

        11: `Paziente che da referto bioptico presenta gastrite cronica con ipotrofia fovecolare e papillomi esofageo minimamente leucoplasici. La paziente, nei periodi di stress avverte dolore allo stomaco e anche nella deglutizione. Cosa posso consigliare?`,

        12: `Paziente uomo con perenni nausee, spesso dopo aver mangiato, assenza della percezione del senso di fame, intestino molto alterato in senso diarroico (con episodi di forti crampi) e soprattutto un addome molto globoso e duro, che anche in ECO hanno fatto difficoltà a causa dell'elevata presenza di aria in sede.
Questo signore ha un passato di utilizzo intensivo di antibiotici (causa Covid con ospedalizzazione durata 4 mesi), antidepressivi (che attualmente prende) e una storia personale non semplice.
Attualmente sta mangiando veramente pochissimo e sta comunque male.`,

        13: `Paziente in amenorrea da tre mesi dopo la perdita di 5 kg (ora BMI 20). In aggiunta a una dieta normocalorica e in attesa di visita ginecologica (che purtroppo non potrà effettuare prima di un paio di mesi), cosa posso suggerire?`,

        14: `Donna in menopausa con disturbi di caldane, insonnia, irritabilità. Cosa posso consigliare?
Inoltre avverte gambe gonfie e pesanti.`,

        15: `Paziente normopeso in dieta low FODMAP da gennaio per meteorismo, gonfiore addominale, coliche e alvo alterno. Con la dieta abbiamo eliminato i dolori e l'alvo si è regolarizzato, ma il gonfiore persiste. La diagnosi del gastroenterologo è digestione lenta per gastrite passata. Cosa consigliare?`,

        16: `Paziente di 42 anni con ipotiroidismo di Hashimoto (assume Eutirox), bocca urente e che presenta stipsi lieve (circa ogni 2/3 giorni). Con la sola alimentazione sta facendo fatica comunque ad andare in bagno (di solito utilizza le 10 erbe). Cosa potrei consigliare?`,

        17: `Donna di 36 anni intollerante al lattosio, affetta solitamente da gonfiore addominale e meteorismo, accusa disordine intestinale da circa una settimana, nonostante stia seguendo un'alimentazione "leggera" (tipo: al mattino kefir senza lattosio con qualche mirtillo e/o semi di chia, a pranzo riso o pasta con olio o con delle carote cotte a vapore + petto di pollo o vitello, a merenda nulla oppure una banana e a cena patate o pasta in bianco + petto di pollo o vitello).
Ha avuto episodi diarroici per 4-5 giorni e al momento, da 3 giorni, avverte lo stimolo più volte nella giornata, soprattutto nell'ora successiva al pasto, ma con estrema difficoltà.`,

        18: `Paziente donna presenta dolicolon e stipsi ostinata. Il gastroenterologo le ha consigliato Nostip a base di psillio ma le ha detto che posso consigliare un prodotto simile visto che seguo la paziente. Cosa posso consigliare?`,

        19: `Transaminasi alte: per paziente donna con transaminasi un po’ elevate rispetto a valori ottimali, vorrei detossificare. Cosa consigliare?`,

        20: `Donna di 63 anni in sovrappeso con fibromialgia, con gonfiore soprattutto alle mani al mattino e alle gambe la sera, con calcolosi biliare, in terapia con Eutirox, Myditin, Natecal, Annister, Totalip, che ha risposto benissimo al dimagrimento con un percorso dietetico ma che ora ha difficoltà e sta riprendendo peso con una BIA che mostra un aumento dei liquidi totali. Cosa posso consigliare? Dalle ultime analisi risulta una VES a 40, emoglobina glicata 6, glicemia 98, creatinina 0,71.`
      };

      function createWheel() {
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("width", "100%");
        svg.setAttribute("height", "100%");
        svg.setAttribute("viewBox", "0 0 500 500");

        const segments = 20;
        const anglePerSegment = 360 / segments;
        const radius = 250;
        const cx = 250;
        const cy = 250;

        for (let i = 0; i < segments; i++) {
          const start = (i * anglePerSegment - 90) * (Math.PI / 180);
          const end = ((i + 1) * anglePerSegment - 90) * (Math.PI / 180);

          const x1 = cx + radius * Math.cos(start);
          const y1 = cy + radius * Math.sin(start);
          const x2 = cx + radius * Math.cos(end);
          const y2 = cy + radius * Math.sin(end);

          const pathData = `M ${cx} ${cy} L ${x1} ${y1} A ${radius} ${radius} 0 0 1 ${x2} ${y2} Z`;

          const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
          const path = document.createElementNS("http://www.w3.org/2000/svg", "path");

          path.setAttribute("d", pathData);
          path.setAttribute("fill", colors[i]);

          g.appendChild(path);
          svg.appendChild(g);
        }

        wheel.innerHTML = "";
        wheel.appendChild(svg);
      }

      function spinWheel() {
        if (isSpinning) return;

        isSpinning = true;
        spinButton.disabled = true;
        result.textContent = "Estrazione in corso...";

        let randomNumber;
        do {
          randomNumber = Math.floor(Math.random() * 20) + 1;
        } while (randomNumber === lastNumber);

        lastNumber = randomNumber;

        const segmentAngle = 360 / 20;
        const targetSegmentMiddle = (randomNumber - 1) * segmentAngle + segmentAngle / 2;
        const spins = Math.floor(Math.random() * 10) + 10; // tra 10 e 19 giri interi

        currentRotation = spins * 360 + targetSegmentMiddle;
        wheel.style.transform = `rotate(${currentRotation}deg)`;

        setTimeout(() => {
            const caseText = cases[randomNumber] || `Caso clinico ${randomNumber}`;
            
            result.innerHTML = `
                <div style="text-align:center; font-weight:700; font-size:18px; margin-bottom:2px;">
                Caso clinico ${randomNumber}
                </div>
                <div style="text-align:left; white-space:pre-line;">
                ${caseText}
                </div>
            `;

            isSpinning = false;
            spinButton.disabled = false;
            }, 5000);

      }

      spinButton.addEventListener("click", spinWheel);

      createWheel();
    </script>
  </body>
</html>
